{
  "version": 3,
  "file": "readium-plugin-injectFonts.js",
  "sources": [
    "../../plugins/injectFonts/main.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "define('readium_plugin_injectFonts/main',['readium_js_plugins', 'jquery', 'underscore'], function(Plugins, $, _) {\n\n\n    /*\n        Usage example.\n\n        Call this before loading a book:\n\n        ReadiumSDK.reader.plugins.injectFonts.registerFontFace({\n            fontFamily: 'OpenDyslexic3',\n            fontWeight: 'normal',\n            fontStyle: 'normal',\n            sources: {\n                'truetype': 'OpenDyslexic3-Regular.ttf'\n            }\n        });\n    */\n\n    function generateFontFaceCss(options) {\n        var fontFamilyAlter = options.fontFamily.replace(/\\s/g, \"\");\n        var sources = [];\n        _.each(options.sources, function(value, key) {\n            sources.push(\", url('\" + value + \"') format('\" + key + \"')\");\n        });\n\n        return [\n            \"@font-face {\\n\",\n            \"\\tfont-family: \\\"\" + options.fontFamily + \"\\\";\\n\",\n            \"\\tsrc: local('\" + options.fontFamily + \"'), local('\" + fontFamilyAlter + \"')\" + sources.join('') + \";\\n\",\n            options.fontStretch ? (\"\\tfont-stretch: \" + options.fontStretch + \";\\n\") : '',\n            options.fontStyle ? (\"\\tfont-style: \" + options.fontStyle + \";\\n\") : '',\n            options.fontVariant ? (\"\\tfont-variant: \" + options.fontVariant + \";\\n\") : '',\n            options.fontWeight ? (\"\\tfont-weight: \" + options.fontWeight + \";\\n\") : '',\n            \"}\\n\"\n        ].join('');\n    }\n\n    function buildFontFaceDeclarations(fontFaceCollection) {\n        var out = [];\n        _.each(fontFaceCollection, function(fontFace) {\n            out.push(generateFontFaceCss(fontFace));\n        });\n        return out.join('\\n');\n    }\n\n    Plugins.register(\"injectFonts\", function(api) {\n        var that = this;\n        var fontFaceCollection = [];\n\n        this.registerFontFace = function(fontFace) {\n            fontFaceCollection.push(fontFace);\n        };\n\n        api.reader.on(ReadiumSDK.Events.CONTENT_DOCUMENT_LOADED, function($iframe, spineItem) {\n            var document = $iframe[0].contentDocument;\n            var $head = $('head', document.documentElement);\n            var styleEl = document.createElement('style');\n            styleEl.id = 'rd-inject-fonts';\n            styleEl.type = 'text/css';\n            styleEl.textContent = buildFontFaceDeclarations(fontFaceCollection);\n            $head.append(styleEl);\n        });\n    });\n\n});\n\ndefine('readium_plugin_injectFonts', ['readium_plugin_injectFonts/main'], function (main) { return main; });\n\n"
  ]
}